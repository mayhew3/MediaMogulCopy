<div class="modal-header">
  <h1 ng-bind="ctrl.series.title"></h1>
</div>

<div class="modal-body clearfix">
  <div class="col-lg-12">
    <form class="bs-component"
          id="seriesFields"
          name="seriesFields"
          ng-submit="ctrl.changeMetacritic(ctrl.series)"
          novalidate>

      <div class="col-lg-3">
        <img class="img-rounded"
             ng-src="{{ctrl.series.posterResolved}}"
             width="100%"
              ng-click="ctrl.openChangePoster()"/>
      </div>

      <div class="form-group col-lg-3">

        <label class="control-label" for="metacriticInput">Metacritic</label>
        <input type="number"
               class="form-control"
               id="metacriticInput"
               name="metacriticInput"
               min="1"
               max="100"
               ng-model="ctrl.interfaceFields.metacritic"/>
      </div>
      <div class="form-group col-lg-3">
        <label class="control-label" for="myRatingInput">My Rating</label>
        <input type="number"
               class="form-control"
               id="myRatingInput"
               name="myRatingInput"
               min="1"
               max="100"
               ng-model="ctrl.interfaceFields.my_rating"/>
      </div>
      <div class="form-group col-lg-3">
        <label class="control-label" for="tvdbHintInput">TVDB Hint</label>
        <input type="text"
               class="form-control"
               id="tvdbHintInput"
               name="tvdbHintInput"
               ng-model="ctrl.interfaceFields.tvdb_hint"/>
      </div>
      <div class="form-group col-lg-3">
        <label class="control-label" for="metacriticHintInput">Metacritic Hint</label>
        <input type="text"
               class="form-control"
               id="metacriticHintInput"
               name="metacriticHintInput"
               ng-model="ctrl.interfaceFields.metacritic_hint"/>
      </div>
      <div class="form-group col-lg-3">
              <span class="input-group-btn">
                      <input class="btn btn-default"
                             type="submit"
                             value="Update"
                             ng-disabled="seriesFields.$invalid || !ctrl.auth.isAuthenticated">
                    </span>
      </div>

      <div class="form-group col-lg-3">
        <label ng-repeat="tier in ctrl.tiers"
               ng-class="ctrl.getTierButtonClass(tier)"
               ng-model="ctrl.series.tier"
               btn-radio="tier"
               ng-change="ctrl.changeTier()">
          <span ng-bind="tier"></span>
        </label>
      </div>

      <div class="form-group col-lg-6">
        <label for="locationGroup">Viewing Locations</label>
        <div id="locationGroup">
          <label ng-repeat="location in ctrl.inputViewingLocations |
                          orderBy:['viewingLocation.id']"
                 ng-class="ctrl.getLocButtonClass(location)"
                 ng-model="location.active"
                 ng-change="ctrl.changeViewingLocation(location)"
                 btn-checkbox>
            <span ng-bind="location.viewingLocation.name"></span>
          </label>
        </div>
      </div>

    </form>
  </div>

  <div id="MarkingAllWatched" class="col-lg-12" style="margin-top: 5px">
    <button type="button"
            class="btn btn-success"
            ng-click="ctrl.markAllPastWatched()"
            ng-disabled="!ctrl.auth.isAuthenticated">All Past Watched</button>
  </div>

  <div id="seasonFilter" class="col-lg-12" style="margin-top: 5px">
    <label ng-repeat="season in ctrl.seasonLabels"
           ng-class="ctrl.getSeasonButtonClass(season)"
           ng-model="ctrl.selectedSeason"
           btn-radio="season">
      <span ng-bind="season"></span>
    </label>
  </div>



  <table class="table table-striped table-hover ">
    <thead>
    <th>Episode</th>
    <th>Title</th>
    <th>Date</th>
    <th>TiVo</th>
    <th>Watched</th>
    <th>Rating</th>
    </thead>
    <tr data-ng-repeat="episode in ctrl.episodes |
                          filter:ctrl.episodeFilter |
                          orderBy:['tvdb_episode_number']"
      ng-click="ctrl.openEpisodeDetail(episode)">
      <td ng-bind="episode.episode_number"></td>
      <td ng-bind="episode.title" class="episodeDescription"></td>
      <td ng-bind="episode.air_date|date:ctrl.getDateFormat(episode.air_date):'-0800'"></td>
      <td>
              <span ng-class="ctrl.getLabelInfo(episode).labelClass"
                    ng-hide="ctrl.getLabelInfo(episode) == null"
                    ng-bind="ctrl.getLabelInfo(episode).labelText"></span>
      </td>
      <td>
        <span ng-bind="ctrl.getWatchedDateOrWatched(episode)"></span>
      </td>
      <td ng-style="episode.colorStyle()" width="70">
        <span ng-bind="ctrl.getRating(episode)"></span>
      </td>
    </tr>
  </table>
</div>
<div class="modal-footer">
  <button class="btn btn-primary" ng-click="ctrl.ok()">Close</button>
</div>